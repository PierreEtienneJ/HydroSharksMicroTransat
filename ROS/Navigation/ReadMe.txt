It's all of algorithm to choose road and cap 

